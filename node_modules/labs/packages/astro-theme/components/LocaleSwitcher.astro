---
import Icon from "astro-icon";

const currentLocale = Astro.currentLocale;
---

<div
	class="flex items-center px-2 mb-4 rounded bg-stone-950 text-stone-400 w-min"
>
	<Icon name="la:globe-africa" class="w-6 h-6" />

	<select
		id="locale-switcher"
		aria-label="Select language"
		class="py-2 bg-stone-950 text-stone-400 font-medium"
	>
		<option value="en" selected={currentLocale === "en"}>English</option>
		<option value="ja" selected={currentLocale === "ja"}>日本語</option>
		<!-- <option value="zh" selected={currentLocale === "zh"}>简体中文</option> -->
	</select>
</div>

<script type="module">
	document.addEventListener("DOMContentLoaded", function () {
		const selector = document.getElementById("locale-switcher");

		selector.addEventListener("change", () => {
			const newLocale = selector.value;
			const { href } = document.querySelector(
				`link[rel=alternate][hreflang=${newLocale}]`,
			); // from BaseHead
			window.location.href = href;
		});
	});
</script>
