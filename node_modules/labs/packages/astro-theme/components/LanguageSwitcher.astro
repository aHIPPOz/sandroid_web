---
const currentLocale = Astro.currentLocale;
---

<select
	id="language-switcher"
	aria-label="Select language"
	class="px-2 py-1 rounded bg-stone-950 text-stone-400 font-medium"
>
	<option value="en" selected={currentLocale === "en"}>English</option>
	<option value="ja" selected={currentLocale === "ja"}>Japanese</option>
</select>

<script type="module">
	document.addEventListener("DOMContentLoaded", function () {
		const selector = document.getElementById("language-switcher");
		selector.addEventListener("change", () => {
			const newLocale = selector.value;
			const { href } = document.querySelector(
				`link[rel=alternate][hreflang=${newLocale}]`,
			); // from BaseHead
			window.location.href = href;
		});
	});
</script>
