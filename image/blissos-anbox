FROM blissos-dev/docker

# Installer les outils nécessaires pour compiler et installer les modules Anbox
RUN apt-get update && apt-get install -y \
    git \
    build-essential \
    kmod

# Cloner et installer les modules Anbox
RUN git clone https://github.com/anbox/anbox-modules.git /anbox-modules
WORKDIR /anbox-modules
RUN make -C /lib/modules/$(uname -r)/build M=$(pwd) modules
RUN cp *.ko /lib/modules/$(uname -r)/extra/ && depmod

# Démarrage du conteneur avec BlissOS
ENTRYPOINT ["/sbin/init"]
